<!--
  ReflectionForm Component
  Part of the Lighthouse Portal Design System
  
  Description: Psychological reflection interface for mood and challenge tracking.
  Features:
  - Emoji-based mood selector
  - Structured prompt for qualitative data
  - Character limit for focused responses
-->

<div class="lhp-vice-reflection">
    <h3>Daily Reflection</h3>
    <p class="lhp-subtitle">Track your emotional state and identify patterns in your journey</p>

    <div class="lhp-form-group">
        <label class="lhp-label">How are you feeling today?</label>
        <div class="lhp-mood-selector">
            <button type="button" class="lhp-mood-btn" data-mood="amazing" aria-label="Amazing">ğŸ¤©</button>
            <button type="button" class="lhp-mood-btn" data-mood="good" aria-label="Good">ğŸ˜Š</button>
            <button type="button" class="lhp-mood-btn" data-mood="neutral" aria-label="Neutral">ğŸ˜</button>
            <button type="button" class="lhp-mood-btn" data-mood="struggling" aria-label="Struggling">ğŸ˜”</button>
            <button type="button" class="lhp-mood-btn" data-mood="difficult" aria-label="Very Difficult">ğŸ˜©</button>
        </div>
    </div>

    <div class="lhp-form-group">
        <label for="reflection-notes" class="lhp-label">What challenges did you face today?</label>
        <textarea 
            id="reflection-notes" 
            class="lhp-textarea" 
            placeholder="Describe any triggers, cravings, or difficult moments..."
            maxlength="500"
            aria-label="Reflection notes"
        ></textarea>
        <div class="lhp-char-count">
            <span id="char-count">0</span> / 500 characters
        </div>
    </div>

    <button type="button" class="lhp-btn-primary">Save Reflection</button>
</div>

<script>
// Mood selector interaction
document.querySelectorAll('.lhp-mood-btn').forEach(btn => {
    btn.addEventListener('click', function() {
        document.querySelectorAll('.lhp-mood-btn').forEach(b => b.classList.remove('selected'));
        this.classList.add('selected');
    });
});

// Character counter
const textarea = document.getElementById('reflection-notes');
const charCount = document.getElementById('char-count');
if (textarea && charCount) {
    textarea.addEventListener('input', function() {
        charCount.textContent = this.value.length;
    });
}
</script>

<style>
.lhp-char-count {
    text-align: right;
    font-size: 0.75rem;
    color: #000000;
    margin-top: 4px;
    font-weight: 700;
}

[data-theme="dark"] .lhp-char-count {
    color: #cccccc;
}

.lhp-mood-btn.selected {
    background: rgba(247, 148, 32, 0.3);
    border-color: var(--lhp-vice-primary);
    transform: scale(1.1);
}

[data-theme="light"] .lhp-mood-btn.selected {
    background: rgba(247, 148, 32, 0.35);
}

[data-theme="dark"] .lhp-mood-btn.selected {
    background: rgba(247, 148, 32, 0.4);
}
</style>
